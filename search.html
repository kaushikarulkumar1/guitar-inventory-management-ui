<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search</title>
    <style>
        body {
         background-color: tan;
         margin: 0;
         padding: 0;
         font-family: Arial, sans-serif;
         position: relative; 
     }

     header {

         color: black;
         padding: 10px;
         text-align: left;
     }

     label, input, button {
            display: block;
            margin-bottom: 10px;
        }


     #main-content {
         text-align: center;
         padding: 20px;
     }

     #top-right-links {
         position: absolute;
         top: 10px;
         right: 10px;
     }

     a {
         color: black;
         text-decoration: none;
         margin-right: 40px;
     }

     a:hover {
         text-decoration: underline;
     }
 </style>
</head>

<body>
    <header>
        <h1>Guitar Inventory Management</h1>
    </header>
    <div id="main-content">
        <div id="top-right-links">
            <a href= "index.html">Home</a>
            <a href="about.html">About</a>
            <a href="add.html">Add</a>
        </div>
    </div>
    <label>Builder: </label>
    <input id="builder" />
    <br />

    <label>Model: </label>
    <input id="model" />
    <br />

    <label>Type: </label>
    <input id="type" />
    <br />

    <label>Back Wood: </label>
    <input id="backWood" />
    <br />

    <label>Top Wood: </label>
    <input id="topWood" />
    <br />

    <button onclick="search()">Search</button>
    <br />

    <table>
        <thead>
            <tr>
                <th>Serial Number</th>
                <th>Price</th>
                <th>Builder</th>
                <th>Model</th>
                <th>Type</th>
                <th>Back Wood</th>
                <th>Top Wood</th>
            </tr>
        </thead>
        <tbody id="searchResult">

        </tbody>
    </table>

    <script>
       let Guitars = [];

async function getAll() {
    let response = await fetch("http://localhost:8080/Guitars");
    let data = await response.json();
    return data;
}


    async function search() {

        if (Guitars.length == 0) {
            Guitars = await getAll();
        }

        let GuitarType = document.getElementById("type").value;
        let table = document.getElementById("result");
        table.innerHTML = "";

        for (let Guitar of Guitars) {
            if (!GuitarType || Guitar.type.toLowerCase() == GuitarType.toLowerCase()) {
                let row = document.createElement("tr");
                let cell1 = document.createElement("td");
                let id = document.createTextNode(Guitar.id);
                cell1.appendChild(id);
                row.appendChild(cell1);
                let cell2 = document.createElement("td");
                let type = document.createTextNode(Guitar.type);
                cell2.appendChild(type);
                row.appendChild(cell2);
                table.appendChild(row);
            }
        }
    }
    </script>
</body>
</html>